<!DOCTYPE html>
<html>
	<head>
		<title>MY BLOG</title>
		<meta charset="utf-8" />
		<link rel="shortcut icon" href="../favicon.ico" /> 
		<link rel="stylesheet" type="text/css" href="../styles/main.css" />
		<link rel="stylesheet" type="text/css" href="../styles/demo.css" />
	</head>
	<body>
		<div class="wrapper">
			<div class="container">
				<div class="primary">
					<div class="header">
						<h1><a href="index.html"><span>ZHRJ</span>博客</a></h1>
						<p>······前端的路很长很长······</p>
						<ul class="nav">
							<li><a href="../index.html">首页</a></li>
							<li><a href="../demo.html">demo</a></li>
							<li><a href="../rebuild.html">网页重构</a></li>
							<li><a href="../aboutjs.html">javascript</a></li>
							<li><a href="../aboutme.html">关于我</a></li>
						</ul>
					</div>
					<div class="sider">
						<div class="sider-box blog-box">
							<h4>关注的博客</h4>
							<ul>
								<li><a href="http://www.zhangxinxu.com/wordpress/">张鑫旭博客</a></li>
								<li><a href="http://www.cssforest.org/blog/">CSS森林</a></li>
								<li><a href="http://coolshell.cn/">酷壳</a></li>
								<li><a href="http://www.qianduan.net/">前端观察</a></li>
							</ul>
						</div>
						<div class="sider-box paper-box">
							<h4>收藏的文章</h4>
							<ul>
								<li><a href="https://github.com/lifesinger/lifesinger.github.com/issues/105">最牛逼的 HTML 和 CSS 代码的背后</a></li>
								<li><a href="http://www.zhangxinxu.com/wordpress/2012/07/bottleneck-css-study/">说说CSS学习中的瓶颈</a></li>
							</ul>
						</div>
						<div class="sider-box me-box">
							<h4>联系我</h4>
							<ul>
								<li>博客园：<a href="http://www.cnblogs.com/zhrj000/">http://www.cnblogs.com/zhrj000/</a></li>
								<li>新浪微博：<a href="http://weibo.com/inthecorner">http://weibo.com/inthecorner</a></li>
								<li>网易邮箱：<a href="http://www.cnblogs.com/zhrj000/">zhrj000@163.com</a></li>
							</ul>
						</div>
					</div>
				</div>
				<div class="content">
					<div class="article">
						<h2>关于js的setTimeout和setInterval</h2>
						<p class="posttime">——发表于2012/10/19 </p>
						<p>刷微博，看到MR梁广彬 的微薄 “alert("1");setTimeout(function(){},5000);alert("2"); JS是异步执行的，我想"2"延迟出现有办法么？但我又不想把alert("2");扔进函数里面，呵呵！只是想理解探讨下！网上找了很多资料都找不到”</p>
						<p>发现以前自己想问题都不深入，好像也没去认真想过setTimeout和setInterval这两个函数</p>
						<p>做了个小测试 </p>
<pre>
setTimeout(function(){console.log("0")},0);
console.log("1");
setTimeout(function(){console.log("2")},3000);
setTimeout(function(){console.log("3")},1000);
setInterval(function(){console.log("4")},2000);
console.log("5");
</pre>
						<p>输出结果</p>
<pre>
1 
5
0
3
4 
2 
4
</pre>
						<p>第一行代码，虽然定时器为0ms，但是呢，它还是在1跟5之后才输出（ps：为什么？）</p>
						<p>上网看到有一篇文章写得挺好的，好好看看看：<a href="http://www.laruence.com/2009/09/23/1089.html">http://www.laruence.com/2009/09/23/1089.html</a>这篇文章一开始看到我很纠结，看了几次，后来通过与MR梁广彬的一起纠结，终于发现有点明白了，用自己的话做的总结：</p>
						<p>Javascript引擎是单线程的，真的单线程，然后，它有一个任务列表，js引擎从任务列表里面取任务出来执行，任务列表的一开始放着的是当前所在函数块，js处理着当前函数块，当遇到setTimeout跟setInterval的时候的时候，此时有浏览器的一个 定时计数器 出来工作了（注意，定时计数器不是js引擎的，，是浏览器的），所以，js引擎始终都是单线程，定时器工作，时间到就触发事件，事件放到任务列表里面，等待js引擎处理完前面的工作（ps：这就解决了上面的疑问，虽然触发时间为0ms，但是由于它是由定时器触发的，所以它在任务列表里面的位置是在原先所在函数块的后面，js引擎先处理完函数块的工作才来处理触发事件），所以，如果有两个任务的触发时间虽然相差很短，但是只要前一个任务还没执行完，就永远轮不到下一个，即使他们的触发时间相差几毫秒，事实上事件的实现可能会差几百毫秒，这就看前一个任务的执行时间了。。</p>
						<p>JavaScript引擎是单线程运行的,浏览器无论在什么时候都只且只有一个线程在运行JavaScript程序.</p>
						<p>JavaScript引擎用单线程运行也是有意义的,单线程不必理会线程同步这些复杂的问题,问题得到简化.</p>
					</div>
				</div>
			</div>
			<div class="footer">Copyright © 2012 <a href="http://zhrj000.github.com/">zhrj000.github.com</a> All rights reserved.</div>
		</div>
	</body>
</html>