<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

		<link rel="stylesheet" href="css/index.css" />
	</head>
	<body>

		<div class="scroll-box scroll-box-1">
			<div class="scroll-panel" id="scrollpanel">
				<div class="scroll-content" id="scrollcontent">
					<h2>start.</h2>
<pre>
var scroll=(function(){

	var scrollblock, //滚动块
		scrollcontent,  //被滚动的内容
		scrollbar,	//滚动条
		scrollpanel,	//滚动内容的滚动区域
		cdistance,  //滚动内容要滚动的距离
		bdistance,	//滚动块要滚动的距离
		minuTop, //滚动条头尾剩下的空白
		cTop,	//滚动内容的top
		startY=0,	//滚动动作开始初鼠标的位置
		bTop=0;	//滚动动作开始初滚动块的top


	
	function mouseDown(event){
		event=event||window.event;
		startY=event.clientY;
		bTop=scrollblock.offsetTop;
		cTop=scrollcontent.offsetTop;
		if(scrollblock.setCapture){
			
			scrollblock.onmousemove=doDrag;
			scrollblock.onmouseup=stopDrag;
			scrollblock.setCapture();
		}else{
			document.addEventListener("mousemove",doDrag,true);
            document.addEventListener("mouseup",stopDrag,true);
		}
		
	}

	function doDrag(event){
		event=event||window.event;
			
		var newbTop=event.clientY-startY+bTop,
			newcTop=cTop-(event.clientY-startY)/bdistance*cdistance;

		if(newbTop&lt;minuTop){
			newbTop=minuTop;
			newcTop=0;
		}else if(newbTop>bdistance+minuTop){
			newcTop=-cdistance;
			newbTop=bdistance+minuTop;
		}
		scrollblock.style.top=newbTop+'px';
		scrollcontent.style.top=newcTop+'px';

	}

	function stopDrag(event){
		if(scrollblock.releaseCapture){

			scrollblock.onmousemove=doDrag;
			scrollblock.onmouseup=stopDrag;
			scrollblock.releaseCapture();
		}else{
			document.removeEventListener("mousemove",doDrag,true);
			document.removeEventListener("mouseup",stopDrag,true);
		}
		scrollblock.onmousemove=null;
		scrollblock.onmouseup=null;
	}


	return{
		init:function(scrollpanel_id,scrollcontent_id,scrollbar_id,scrollblock_id){
			scrollblock=document.getElementById(scrollblock_id);
			scrollcontent=document.getElementById(scrollcontent_id);
			scrollbar=document.getElementById(scrollbar_id);
			scrollpanel=document.getElementById(scrollpanel_id);
			minuTop=scrollblock.offsetTop;
			cdistance=scrollcontent.offsetHeight-scrollpanel.offsetHeight;
			bdistance=scrollbar.offsetHeight-minuTop*2-scrollblock.offsetHeight;


			scrollblock.onmousedown=mouseDown;
			enclose(scrollpanel,scrollcontent,scrollbar,scrollblock,bdistance,cdistance,minuTop);
		}
	}



}());

scroll.init('scrollpanel','scrollcontent','scrollbar','scrollblock');
</pre>
					<h2>end.</h2>
				</div>
			</div>
			<div class="scroll-bar" id="scrollbar">
				<div class="scroll-block" id="scrollblock"></div>
			</div>
		</div>

		<div class="scroll-box scroll-box-2">
			<div class="scroll-panel" id="scrollpanel2">
				<div class="scroll-content" id="scrollcontent2">
					<h2>start.</h2>
<pre>
var scrollself=(function(){

	var scrollblock, //滚动块
		scrollcontent,  //被滚动的内容
		scrollbar,	//滚动条
		scrollpanel,	//滚动内容的滚动区域
		cdistance,  //滚动内容要滚动的距离
		bdistance,	//滚动块要滚动的距离
		minuTop, //滚动条头尾剩下的空白
		cTop,	//滚动内容的top
		startY=0,	//滚动动作开始初鼠标的位置
		bTop=0,	//滚动动作开始初滚动块的top
		isDrag=false;  //是否拉动滚动块


	function prevent(e){

		if(e.preventDefault){
			e.preventDefault();
		}
		if(e.stopPropagation){
			e.stopPropagation();
		}
		e.cancelBubble=true;
		e.returnValue=false;
	}

	function mouseDown(event){
		isDrag=true;
		event=event||window.event;
		startY=event.clientY;
		bTop=scrollblock.offsetTop;
		cTop=scrollcontent.offsetTop;

		// prevent(event);

	}

	function mouseMove(event){
		if(isDrag){

			event=event||window.event;
			
			var newbTop=event.clientY-startY+bTop,
				newcTop=cTop-(event.clientY-startY)/bdistance*cdistance;

			if(newbTop&lt;minuTop){
				newbTop=minuTop;
				newcTop=0;
			}else{
				if(newbTop>bdistance+minuTop){
					newcTop=-cdistance;
					newbTop=bdistance+minuTop;
				}
			}

			scrollblock.style.top=newbTop+'px';
			scrollcontent.style.top=newcTop+'px';
		}else{
			isDrag=false;
		}

		// prevent(event);
	}

	function mouseUp(event){

		isDrag=false;

		// prevent(event);
	}

	function addHandler(){
		scrollblock.onmousedown=mouseDown;
		scrollblock.onmousemove=mouseMove;
		scrollblock.onmouseup=mouseUp;
		document.onmouseup=mouseUp;
	}


	return{
		init:function(scrollpanel_id,scrollcontent_id,scrollbar_id,scrollblock_id){
			scrollblock=document.getElementById(scrollblock_id);
			scrollcontent=document.getElementById(scrollcontent_id);
			scrollbar=document.getElementById(scrollbar_id);
			scrollpanel=document.getElementById(scrollpanel_id);
			minuTop=scrollblock.offsetTop;
			cdistance=scrollcontent.offsetHeight-scrollpanel.offsetHeight;
			bdistance=scrollbar.offsetHeight-minuTop*2-scrollblock.offsetHeight;
		
			enclose(scrollpanel,scrollcontent,scrollbar,scrollblock,bdistance,cdistance,minuTop);
			addHandler();
		}
	}


}());

scrollself.init('scrollpanel2','scrollcontent2','scrollbar2','scrollblock2');
</pre>
					<h2>end.</h2>
				</div>
			</div>
			<div class="scroll-bar" id="scrollbar2">
				<div class="scroll-block" id="scrollblock2"></div>
			</div>
		</div>
		<script type="text/javascript" src="js/mousewheel.js"></script>
		<script type="text/javascript" src="js/scroll.js"></script>
	</body>
</html>